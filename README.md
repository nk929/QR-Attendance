# QR 출석 관리 시스템 📱

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=flat&logo=html5&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/HTML)
[![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=flat&logo=css3&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/CSS)
[![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=javascript&logoColor=black)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)

개인식별용 QR코드 기반 자동 출석 확인 웹 애플리케이션입니다.

## 🎯 프로젝트 개요

이 시스템은 각 사용자(학생/참석자)에게 고유한 QR 코드를 발급하고, 관리자가 카메라로 QR 코드를 스캔하면 자동으로 출석이 기록되는 웹 애플리케이션입니다. 학교, 학원, 회사, 모임 등 다양한 환경에서 출석 관리를 효율적으로 할 수 있습니다.

### 🆕 v1.2.0 주요 업데이트
- ✅ **데이터 동기화**: PC ↔ 모바일 간 데이터 내보내기/가져오기 기능
- ✅ **크로스 플랫폼**: LocalStorage 기반으로 어디서든 사용 가능
- ✅ **병합 지원**: 여러 기기의 데이터를 자동으로 병합

## 🚀 빠른 시작

### 설치 방법

1. **저장소 클론**
```bash
git clone https://github.com/your-username/qr-attendance-system.git
cd qr-attendance-system
```

2. **웹 서버 실행**

**방법 1: Live Server (VS Code 확장)**
- VS Code에서 프로젝트 열기
- Live Server 확장 설치
- `index.html` 우클릭 → "Open with Live Server"

**방법 2: Python 내장 서버**
```bash
# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000
```

**방법 3: Node.js http-server**
```bash
npx http-server -p 8000
```

3. **브라우저에서 접속**
```
http://localhost:8000
```

### 📋 요구사항

- 모던 웹 브라우저 (Chrome, Firefox, Safari, Edge)
- 카메라 접근 권한 (QR 스캔 기능 사용 시)
- 로컬 서버 또는 웹 호스팅 환경

## ✨ 주요 기능

### 1. 대시보드 (`/index.html`)
- **실시간 통계**: 등록 사용자 수, 오늘 출석 수, 전체 출석 기록, 출석률
- **최근 출석 기록**: 최근 10개의 출석 기록을 실시간으로 표시
- **빠른 작업**: 주요 기능으로 빠르게 이동
- **자동 새로고침**: 30초마다 자동으로 데이터 업데이트

### 2. 사용자 등록 (`/register.html`)
- **🎨 동적 입력 항목 관리**: 
  - ➕ 새 항목 추가 (학번, 생년월일, 주소 등)
  - ✏️ 기존 항목 수정 (이름, 타입, 아이콘, 필수 여부)
  - 🗑️ 불필요한 항목 삭제
  - 🔄 **항목 사용/미사용 토글** (이름 항목 제외)
  - 💾 설정 자동 저장 (로컬 스토리지)
- **사용자 정보 입력**: 활성화된 필드만 표시
- **QR 코드 자동 생성**: 등록 즉시 개인 QR 코드 생성
- **QR 코드 다운로드**: PNG 이미지로 다운로드
- **QR 코드 인쇄**: 
  - ✅ 인쇄할 항목 선택 (이름, 이메일, 전화번호 등)
  - 📏 QR 코드 크기 조절 (작게/보통/크게)
  - 📅 인쇄 날짜 포함 옵션
  - 🏢 시스템 로고/이름 포함 옵션
  - 💡 사용 안내문구 자동 포함
- **📤 데이터 내보내기**: JSON 형식으로 사용자/출석 데이터 백업
- **📥 데이터 가져오기**: 다른 기기에서 내보낸 데이터 병합
- **사용자 목록 관리**: 등록된 모든 사용자 조회 및 삭제
- **실시간 검색**: 모든 필드에서 검색 가능

### 3. QR 스캐너 (`/scanner.html`)
- **카메라 스캔**: 실시간 카메라로 QR 코드 스캔
- **⚠️ 모바일 데이터 동기화 안내**: PC에서 등록한 사용자 정보 가져오기 가이드
- **📥 데이터 가져오기**: 모바일에서 직접 사용자 데이터 가져오기
- **자동 출석 처리**: QR 코드 인식 즉시 출석 기록
- **🚫 중복 출석 방지**: 같은 날 같은 이벤트 중복 체크 불가
- **행사명 설정**: 출석 이벤트/수업명 지정 가능
- **중복 방지**: 3초 내 중복 스캔 방지
- **스캔 결과 표시**: 스캔된 사용자 실시간 표시
- **오늘 출석 현황**: 당일 출석한 모든 사용자 목록

### 4. 출석 기록 관리 (`/attendance.html`)
- **전체 출석 기록**: 모든 출석 기록 조회
- **고급 필터링**: 날짜, 사용자명, 행사명으로 검색
- **🔄 중복 제거 기능**: 같은 날/사용자/이벤트의 중복 기록 일괄 삭제
- **페이지네이션**: 50개씩 페이지 분할 표시
- **엑셀 다운로드**: 출석 기록을 Excel(XLSX) 파일로 내보내기
  - 📊 출석 리포트 (번호, 이름, 행사명, 시간 등)
  - 📈 날짜별 출석 통계
  - 📉 행사별 출석 통계
- **CSV 다운로드**: 출석 기록을 CSV 파일로 내보내기
- **기록 삭제**: 개별 출석 기록 삭제 기능

## 🗄️ 데이터 구조

### Users 테이블
```javascript
{
  id: string,              // UUID (자동 생성)
  name: string,            // 사용자 이름
  email: string,           // 이메일 주소
  phone: string,           // 전화번호
  department: string,      // 부서/학과
  qr_code: string,         // 개인 QR 코드 (UUID)
  status: string,          // 상태 (active/inactive)
  created_at: number,      // 등록 시간
  updated_at: number       // 수정 시간
}
```

### Attendance 테이블
```javascript
{
  id: string,              // UUID (자동 생성)
  user_id: string,         // 사용자 ID (외래키)
  user_name: string,       // 사용자 이름 (캐시)
  check_in_time: string,   // 출석 확인 시간 (ISO 8601)
  location: string,        // 출석 위치
  event_name: string,      // 행사/수업명
  created_at: number,      // 생성 시간
  updated_at: number       // 수정 시간
}
```

## 🚀 사용 방법

### 0단계: 입력 항목 커스터마이징 (선택사항)
1. **사용자 등록** 페이지의 **입력 항목 관리** 섹션 이용
2. **새 항목 추가** 버튼으로 필요한 필드 추가
   - 학번, 학년, 생년월일, 주소, 소속팀 등
3. 항목별 설정:
   - 📝 항목 이름 (예: "학번")
   - 🔑 필드 ID (예: "student_id")
   - 📋 입력 타입 (텍스트, 이메일, 전화번호, 숫자, 날짜)
   - 🎨 아이콘 선택
   - ✅ 필수/선택 여부
4. 설정은 자동으로 브라우저에 저장됨

### 1단계: 사용자 등록
1. **사용자 등록** 메뉴로 이동
2. 사용자 정보 입력 (이름은 필수)
3. **등록하기** 버튼 클릭
4. 생성된 QR 코드 다운로드 또는 인쇄
5. QR 코드를 사용자에게 배포

### 1.5단계: 데이터 동기화 (모바일 사용 시 필수) 🆕
**PC에서 등록 → 모바일에서 스캔하는 경우:**

```
PC:
1. "사용자 등록" 페이지 → "데이터 동기화" 섹션
2. "데이터 내보내기" 버튼 클릭
3. JSON 파일 다운로드 (예: qr-attendance-backup-2026-02-10.json)

파일 전송:
4. 카카오톡/이메일/클라우드로 모바일에 전송

모바일:
5. "QR 스캔" 페이지 접속
6. 노란색 안내 박스의 "데이터 가져오기" 버튼 클릭
7. 전송받은 JSON 파일 선택
8. ✅ 가져오기 완료! 이제 QR 스캔 가능
```

**💡 팁**: 매일 아침 한 번만 동기화하면 하루 종일 사용 가능!

### 2단계: QR 코드 스캔 (출석 체크)

### 2단계: 출석 체크
1. **QR 스캔** 메뉴로 이동
2. 행사/수업명 입력 (선택사항)
3. **스캐너 시작** 버튼 클릭
4. 카메라 권한 허용
5. 사용자의 QR 코드를 카메라에 비춤
6. 자동으로 출석 기록 완료

### 3단계: 기록 관리
1. **출석 기록** 메뉴로 이동
2. 날짜, 사용자명, 행사명으로 필터링
3. **엑셀 다운로드** 버튼으로 상세 리포트 다운로드
   - 출석 기록 목록
   - 날짜별 통계
   - 행사별 통계
4. 또는 **CSV 다운로드**로 간단한 데이터 다운로드
5. 필요시 개별 기록 삭제

## 📱 화면 구성

```
┌─────────────────────────────────────┐
│        🏠 대시보드                   │
│  - 통계 카드 (4개)                  │
│  - 최근 출석 기록                    │
│  - 빠른 작업 버튼                    │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│     👤 사용자 등록                   │
│  ┌─────────────────────────────┐   │
│  │  🎨 입력 항목 관리          │   │
│  │  - 항목 추가/수정/삭제      │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │  🔄 데이터 동기화 🆕        │   │
│  │  - 데이터 내보내기 (JSON)   │   │
│  │  - 데이터 가져오기          │   │
│  └─────────────────────────────┘   │
│  ┌─────────────┬─────────────┐     │
│  │ 등록 폼     │  QR 코드    │     │
│  │ (동적 생성) │  표시       │     │
│  └─────────────┴─────────────┘     │
│  - 등록된 사용자 목록               │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│       📷 QR 스캐너                   │
│  ┌─────────────────────────────┐   │
│  │ ⚠️ 모바일 데이터 동기화     │   │
│  │ 안내 (노란색 박스) 🆕       │   │
│  └─────────────────────────────┘   │
│  ┌─────────────┬─────────────┐     │
│  │ 카메라      │  스캔       │     │
│  │ 스캐너      │  결과       │     │
│  └─────────────┴─────────────┘     │
│  - 오늘 출석 현황                   │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│       📋 출석 기록                   │
│  - 필터 및 검색                     │
│  - 출석 기록 테이블                 │
│  - 페이지네이션                     │
│  - 엑셀/CSV 다운로드                │
└─────────────────────────────────────┘
```

## 🛠️ 기술 스택

### Frontend
- **HTML5**: 시맨틱 마크업
- **CSS3**: 반응형 디자인, Flexbox, Grid
- **JavaScript (ES6+)**: 모던 자바스크립트

### Libraries (CDN)
- **Font Awesome 6.4.0**: 아이콘
- **QRCode.js 1.0.0**: QR 코드 생성
- **jsQR 1.4.0**: QR 코드 스캔
- **SheetJS (XLSX) 0.18.5**: 엑셀 파일 생성 및 다운로드

### Backend API
- **LocalStorage 기반 데이터 저장**: 서버 없이 브라우저에서 작동 🆕
  - 사용자 데이터 저장/조회
  - 출석 기록 저장/조회
  - 데이터 내보내기/가져오기 기능 (JSON)
  - 자동 데이터 병합 (중복 제거)
  - 브라우저 간 데이터 독립적 운영

## 📂 프로젝트 구조

```
qr-attendance-system/
├── index.html              # 대시보드
├── register.html           # 사용자 등록
├── scanner.html            # QR 스캐너
├── attendance.html         # 출석 기록
├── css/
│   └── style.css          # 전체 스타일
├── js/
│   ├── main.js            # 공통 유틸리티
│   ├── storage.js         # LocalStorage 관리 (내보내기/가져오기) 🆕
│   ├── dashboard.js       # 대시보드 로직
│   ├── register-new.js    # 등록 페이지 로직 (동적 필드)
│   ├── scanner.js         # 스캐너 로직
│   └── attendance.js      # 출석 기록 로직
├── README.md              # 프로젝트 문서
├── USER_GUIDE.md          # 사용자 가이드 🆕
├── SYNC_OPTIONS.md        # 데이터 동기화 옵션 가이드 🆕
└── LICENSE                # MIT 라이선스
```

## 🎨 디자인 특징

- **그라디언트 배경**: 보라색 계열의 세련된 그라디언트
- **카드 레이아웃**: 모든 콘텐츠를 깔끔한 카드로 구성
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 모두 지원
- **부드러운 애니메이션**: 호버, 클릭 시 자연스러운 전환 효과
- **직관적 아이콘**: Font Awesome을 활용한 시각적 가이드

## 📱 반응형 지원

- **데스크톱** (1200px+): 전체 기능 2-3단 그리드 레이아웃
- **태블릿** (768px-1199px): 2단 레이아웃
- **모바일** (767px 이하): 1단 레이아웃, 햄버거 메뉴

## 🔒 보안 고려사항

- QR 코드는 UUID 기반으로 예측 불가능
- 중복 스캔 방지 (3초 제한)
- 클라이언트 사이드 검증
- LocalStorage 기반 로컬 데이터 저장 (개인정보 보호) 🆕

## 📊 데이터 동기화 전략 🆕

### LocalStorage 기반 운영
- 각 브라우저마다 독립적인 데이터 저장
- PC ↔ 모바일 간 수동 동기화 (JSON 파일)
- 데이터 내보내기/가져오기로 기기 간 공유
- 자동 병합 기능 (중복 ID 제거)

### 사용 패턴
**단일 관리자**: PC에서 등록 → 모바일로 동기화 → QR 스캔  
**여러 관리자**: 메인 PC에서 관리 → 각 관리자 기기로 배포

자세한 내용은 [SYNC_OPTIONS.md](./SYNC_OPTIONS.md) 참조

## 🚧 향후 개선 사항

### ✅ 최근 완료된 기능 (v1.2.0)
- [x] **데이터 내보내기/가져오기**: JSON 형식으로 크로스 플랫폼 동기화
- [x] **데이터 자동 병합**: 중복 ID 제거 및 스마트 병합
- [x] **모바일 동기화 안내**: 스캐너 페이지에 가이드 추가
- [x] **동적 입력 항목 관리**: 사용자 등록 시 필요한 필드를 자유롭게 추가/수정/삭제
- [x] **항목 사용/미사용 토글**: 등록 필드를 활성화/비활성화 전환
- [x] **엑셀 다운로드**: 상세한 통계가 포함된 Excel 리포트 생성
- [x] **중복 출석 방지**: 같은 날 같은 이벤트 중복 체크 차단
- [x] **중복 기록 일괄 삭제**: 출석 기록에서 중복 데이터 자동 정리

### 계획된 기능 (v1.3.0+)
- [ ] Firebase/Supabase 연동 (실시간 동기화 옵션)
- [ ] 사용자 프로필 사진 업로드
- [ ] 출석 통계 차트 (Chart.js 활용)
- [ ] 출석률 기반 리포트 생성
- [ ] 사용자별 출석 이력 조회
- [ ] 엑셀 파일 일괄 등록
- [ ] 이메일/SMS 알림 기능
- [ ] QR 코드 유효기간 설정
- [ ] 출석 시간대별 분석
- [ ] 다크 모드 지원
- [ ] 다국어 지원 (영어, 중국어)

### 개선 가능 영역
- [ ] PWA(Progressive Web App) 변환
- [ ] 오프라인 모드 지원 강화
- [ ] 실시간 알림 (WebSocket)
- [ ] 관리자 권한 시스템
- [ ] 출석 시간 범위 제한
- [ ] 지각/조퇴 구분 기능

## 💡 사용 시나리오

### 학교/학원
- 학생들에게 개인 QR 코드 발급
- 수업 시작 시 QR 스캔으로 출석 체크
- 학부모에게 출석 현황 공유

### 회사/오피스
- 직원 출퇴근 관리
- 회의 참석 확인
- 교육/세미나 참석 기록

### 행사/모임
- 참가자 등록 및 입장 관리
- 세션별 참석 추적
- 참석 통계 및 리포트

### 헬스장/스포츠센터
- 회원 출입 관리
- 프로그램별 참석 기록
- 이용 패턴 분석

## 🤝 기여하기

프로젝트 개선에 기여하고 싶으시다면:

1. Fork 하기
2. Feature 브랜치 생성 (`git checkout -b feature/AmazingFeature`)
3. 변경사항 커밋 (`git commit -m 'Add some AmazingFeature'`)
4. 브랜치에 Push (`git push origin feature/AmazingFeature`)
5. Pull Request 생성

## 📞 기술 지원

프로젝트 사용 중 문제가 발생하거나 개선 제안이 있으시면:
- 🐛 [Issues](https://github.com/your-username/qr-attendance-system/issues)에 버그 리포트
- 💡 [Discussions](https://github.com/your-username/qr-attendance-system/discussions)에서 아이디어 공유

## 📄 라이선스

이 프로젝트는 [MIT 라이선스](LICENSE) 하에 배포됩니다.
교육 및 상업적 목적으로 자유롭게 사용 가능합니다.

## 🌟 Star History

이 프로젝트가 도움이 되셨다면 ⭐ Star를 눌러주세요!

---

**개발 시작일**: 2026-01-25  
**최근 업데이트**: 2026-02-10  
**버전**: 1.2.0

**Made with ❤️ for efficient attendance management**

